<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>90. Geburtstag ‚Äì Maria Ronczka</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
<style>
:root{--lila:#b06ab3;--panel:#111;}
*{box-sizing:border-box;margin:0;padding:0;}
html,body{height:100%;width:100%;overflow-x:hidden;font-family:'Playfair Display',serif;font-weight:700;background:#000;color:var(--lila);}
body{display:flex;flex-direction:column;align-items:center;text-align:center;line-height:1.6;}

/* Intro-Text wie #invite */
#intro{
position:fixed;top:100px;left:50%;transform:translateX(-50%);
max-width:800px;padding:40px 20px;background:none;color:var(--lila);
font-size:22px;line-height:1.8;text-shadow:1px 1px 4px #000;z-index:10;transition:opacity 1s;
}

/* Hintergrundslideshow */
#bg{position:fixed;inset:0;z-index:-3;height:100%;width:100%;display:none;}
.slide{position:absolute;inset:0;background-size:cover;background-position:center;opacity:0;animation:fade 60s infinite;height:100%;width:100%;}
.slide:nth-child(1){background-image:url("bilder/bild1.jpg");animation-delay:0s;}
.slide:nth-child(2){background-image:url("bilder/bild2.jpg");animation-delay:12s;}
.slide:nth-child(3){background-image:url("bilder/bild3.jpg");animation-delay:24s;}
.slide:nth-child(4){background-image:url("bilder/bild4.jpg");animation-delay:36s;}
.slide:nth-child(5){background-image:url("bilder/bild5.jpg");animation-delay:48s;}
@keyframes fade{0%{opacity:0}8%{opacity:1}22%{opacity:1}30%{opacity:0}}
.overlay{position:fixed;inset:0;background:rgba(0,0,0,0.05);z-index:-2;pointer-events:none;}

/* Einladungstext */
#invite{position:relative;z-index:2;padding:40px 20px;display:none;flex-direction:column;justify-content:center;align-items:center;margin-top:100px;max-width:800px;}
#invite h1{color:var(--lila);font-size:48px;margin-bottom:20px;text-shadow:1px 1px 6px #000;font-weight:700;}
#invite p{font-size:22px;line-height:1.8;text-shadow:1px 1px 4px #000;margin-bottom:30px;font-weight:700;}
#invite button{margin-top:20px;}
#invite select{margin-top:20px;padding:8px 12px;font-weight:700;}

/* Buttons */
button{background:none;border:2px solid var(--lila);color:var(--lila);padding:14px 30px;font-size:18px;cursor:pointer;transition:.3s;font-weight:700;}
button:hover{background:var(--lila);color:#000;box-shadow:0 0 20px rgba(176,106,179,.6);}

/* Formular */
label{display:block;margin-top:14px;font-size:16px;font-weight:700;}
input,textarea,select{width:100%;padding:12px;margin-top:6px;background:#1a1a1a;border:1px solid #444;color:var(--lila);font-family:inherit;font-weight:700;}
.modal{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,.85);z-index:5;}
.modal-box{background:var(--panel);border:2px solid var(--lila);padding:30px;width:92%;max-width:520px;max-height:90vh;overflow:auto;}

/* Admin */
.admin{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:6;max-width:95%;padding:25px;background:var(--panel);border:2px solid var(--lila);}
.admin table{display:block;overflow-x:auto;width:100%;border-collapse:collapse;font-size:16px;}
th,td{border:1px solid #444;padding:8px;vertical-align:top;color:var(--lila);font-weight:700;}
th{background:#1a1a1a;}
canvas{display:block;margin:20px auto;background:#0e0e0e;border:1px solid #333;max-width:100%;}

/* Footer */
footer{position:fixed;bottom:10px;width:100%;z-index:7;text-align:center;font-weight:700;opacity:.7;}
footer span{cursor:pointer;color:var(--lila);margin:0 5px;}
footer span:hover{text-decoration:underline;}

/* Slideshow leichter Zoom */
.slide{transform: scale(1);transition: transform 60s linear;}
.slide:nth-child(1){animation:zoomfade1 60s infinite;}
@keyframes zoomfade1{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}

/* Responsive */
@media(max-width:768px){
#invite h1{font-size:36px;}
#invite p{font-size:18px;}
button{padding:12px 24px;font-size:16px;}
.modal-box{width:95%;padding:25px;}
.admin table{font-size:14px;}
}
</style>
</head>
<body>

<div id="intro">
Ein Stern am Himmel und Schatz auf Erden wird 90.<br>
Liebe Familie und Freunde!<br>
Wir laden herzlich ein, den 90. Geburtstag von <b>Maria Ronczka</b> mit uns zu feiern!<br>
<b>Wann:</b> Samstag, den 11. April 2026, ab 13 Uhr<br>
<b>Wo:</b> Gasthaus Greskamp, Funnenkampstra√üe 18, 59399 Olfen<br>
Wir freuen uns auf einen sch√∂nen Tag mit Euch.<br>
Leider k√∂nnen wir keine √úbernachtung anbieten.<br>
R√ºckmeldung bitte bis Ende Februar.<br>
<b>Herzliche Gr√º√üe, Maria Ronczka mit Familie</b>
</div>

<div id="bg">
  <div class="slide"></div>
  <div class="slide"></div>
  <div class="slide"></div>
  <div class="slide"></div>
  <div class="slide"></div>
</div>
<div class="overlay"></div>
<audio id="music" src="0118.mp3" autoplay loop muted></audio>

<div id="invite">
<h1 id="title"></h1>
<p id="inviteText"></p>
<button id="btnReply" onclick="openForm()"></button>
<select id="langSelect" onchange="setLang(this.value)">
<option value="de">Deutsch</option>
<option value="pl">Polski</option>
</select>
</div>

<div class="modal" id="formModal">
<div class="modal-box">
<h2 id="formTitle"></h2>
<label id="lblName" for="mainName"></label>
<input id="mainName">
<label id="lblPhone" for="phone"></label>
<input id="phone" type="tel">
<label id="lblTime" for="time"></label>
<input type="time" id="time" min="13:00">
<label id="lblCount" for="count"></label>
<input type="number" id="count" min="1" max="5" value="1" onchange="buildPersons()">
<div id="persons"></div>
<label id="lblMusic" for="musicWish"></label>
<textarea id="musicWish"></textarea>
<label id="lblMessage" for="message"></label>
<textarea id="message"></textarea>
<br>
<button id="btnSend" onclick="sendForm()"></button>
<button id="btnClose" onclick="closeForm()"></button>
<p id="formStatus"></p>
</div>
</div>

<div class="admin" id="admin">
<h2>üìä Admin ‚Äì G√§steliste</h2>
<h3 id="sum"></h3>
<canvas id="chart" width="1100" height="300"></canvas>
<table>
<thead>
<tr><th>Name</th><th>Telefon</th><th>Zeit</th><th>Anz.</th><th>Personen</th><th>Musik</th><th>Nachricht</th><th>Aktion</th></tr>
</thead>
<tbody id="adminList"></tbody>
</table>
<br>
<button onclick="logout()">Admin schlie√üen</button>
</div>

<footer>
<span onclick="adminLogin()">Admin Login</span> | 
<span onclick="window.open('https://instagram.com/placeholder','_blank')">Erstellt von Elias R.</span>
</footer>

<script>
// Texte
const DB="https://geburtstag-bff4c-default-rtdb.europe-west1.firebasedatabase.app/anmeldungen";
let currentLang="de";
const TXT={
de:{title:"Liebe Familie und Freunde!",inviteText:`Ein Stern am Himmel und Schatz auf Erden wird 90.<br><br>
Wir laden herzlich ein, den 90. Geburtstag von <b>Maria Ronczka</b> mit uns zu feiern!<br><br>
<b>Wann:</b> Samstag, den 11. April 2026, ab 13 Uhr<br>
<b>Wo:</b> Gasthaus Greskamp, Funnenkampstra√üe 18, 59399 Olfen<br><br>
Wir freuen uns auf einen sch√∂nen Tag mit Euch.<br>
Leider k√∂nnen wir keine √úbernachtung anbieten.<br>
R√ºckmeldung bitte bis Ende Februar.<br><br>
<b>Herzliche Gr√º√üe, Maria Ronczka mit Familie</b>`,
reply:"R√ºckmeldung geben",formTitle:"R√ºckmeldung",replyBtnSend:"Absenden",replyBtnClose:"Schlie√üen",saved:"‚úî Gespeichert",
person:"Person",lblName:"Ihr Name",lblPhone:"Telefonnummer",lblTime:"Ankunft (ab 13 Uhr)",lblCount:"Anzahl Personen (max 5)",lblMusic:"Musikwunsch (optional)",lblMessage:"Nachricht",adminPw:"Admin Passwort",total:"Gesamtpersonen:",delConfirm:"Eintrag l√∂schen?"},
pl:{title:"Droga Rodzino i Przyjaciele!",inviteText:`Gwiazda na niebie i skarb na ziemi ko≈Ñczy 90 lat.<br><br>
Serdecznie zapraszamy na 90. urodziny <b>Maria Ronczka</b>!<br><br>
<b>Kiedy:</b> Sobota, 11 kwietnia 2026, od 13:00<br>
<b>Gdzie:</b> Gasthaus Greskamp, Funnenkampstra√üe 18, 59399 Olfen<br><br>
Cieszymy siƒô na wsp√≥lny pfekny dzie≈Ñ.<br>
Niestety nie mo≈ºemy zaoferowaƒá noclegu.<br>
Prosimy o odpowied≈∫ do ko≈Ñca lutego.<br><br>
<b>Pozdrawiamy, Maria Ronczka z rodzinƒÖ</b>`,
reply:"Odpowied≈∫",formTitle:"Odpowied≈∫",replyBtnSend:"Wy≈õlij",replyBtnClose:"Zamknij",saved:"‚úî Zapisano",
person:"Osoba",lblName:"Twoje imiƒô",lblPhone:"Telefon",lblTime:"Godzina przybycia (od 13:00)",lblCount:"Liczba os√≥b (max 5)",lblMusic:"≈ªyczenie muzyczne (opcjonalnie)",lblMessage:"Wiadomo≈õƒá",adminPw:"Has≈Ço admina",total:"Liczba os√≥b:",delConfirm:"UsunƒÖƒá wpis?"}
};

// Sprache setzen
function setLang(l){
currentLang=l;
document.getElementById('title').innerHTML=TXT[l].title;
document.getElementById('inviteText').innerHTML=TXT[l].inviteText;
document.getElementById('btnReply').innerHTML=TXT[l].reply;
document.getElementById('formTitle').innerHTML=TXT[l].formTitle;
document.getElementById('lblName').innerHTML=TXT[l].lblName;
document.getElementById('lblPhone').innerHTML=TXT[l].lblPhone;
document.getElementById('lblTime').innerHTML=TXT[l].lblTime;
document.getElementById('lblCount').innerHTML=TXT[l].lblCount;
document.getElementById('lblMusic').innerHTML=TXT[l].lblMusic;
document.getElementById('lblMessage').innerHTML=TXT[l].lblMessage;
document.getElementById('btnSend').innerText=TXT[l].replyBtnSend;
document.getElementById('btnClose').innerText=TXT[l].replyBtnClose;
buildPersons();
}
setLang("de");

// Intro + Slideshow
window.addEventListener('load',()=>{
const intro=document.getElementById('intro');
const bg=document.getElementById('bg');
const invite=document.getElementById('invite');
const music=document.getElementById('music');
music.play().catch(()=>{});
setTimeout(()=>{
intro.style.opacity=0;
setTimeout(()=>{
intro.style.display='none';
bg.style.display='block';
invite.style.display='flex';
},1000);
},5000);
});

// Form
function openForm(){document.getElementById('formModal').style.display="flex";buildPersons();}
function closeForm(){document.getElementById('formModal').style.display="none";}
function buildPersons(){
const container = document.getElementById('persons');
container.innerHTML="";
const n=Math.min(parseInt(document.getElementById('count').value)||1,5);
for(let i=1;i<=n;i++){
container.innerHTML+=`<label>${TXT[currentLang].person} ${i}</label><input class="person">`;
}
}

async function sendForm(){
const status = document.getElementById('formStatus');
status.innerText="√úbertrage Daten...";
const personsArr=[...document.querySelectorAll(".person")].map(p=>p.value);
const phoneVal=document.getElementById('phone').value.replace(/\D/g,'');
if(!phoneVal){alert("Telefonnummer nur Zahlen!");status.innerText="";return;}
const data={
mainName:document.getElementById('mainName').value,
phone:phoneVal,
time:document.getElementById('time').value,
count:personsArr.length,
persons:personsArr,
music:document.getElementById('musicWish').value,
message:document.getElementById('message').value,
ts:new Date().toLocaleString()
};
try {
await fetch(DB+".json",{method:"POST",body:JSON.stringify(data)});
status.innerText=TXT[currentLang].saved;
setTimeout(closeForm, 1500);
} catch(e) {
status.innerText="Fehler beim Speichern.";
}
}

// Admin
async function adminLogin(){
if(prompt(TXT[currentLang].adminPw)!=="maria90")return;
document.getElementById('invite').style.display="none";
document.getElementById('admin').style.display="block";
loadAdmin();
}
function logout(){
document.getElementById('admin').style.display="none";
document.getElementById('invite').style.display="flex";
}

async function loadAdmin(){
const res=await fetch(DB+".json");
const data=await res.json();
let total=0,values=[];
const list = document.getElementById('adminList');
list.innerHTML="";
for(const id in data){
const d=data[id];
total+=d.count;
values.push(d.count);
list.innerHTML+=`<tr data-id="${id}"><td contenteditable="true">${d.mainName}</td><td contenteditable="true">${d.phone}</td><td contenteditable="true">${d.time}</td><td contenteditable="true">${d.count}</td><td contenteditable="true">${d.persons.join(", ")}</td><td contenteditable="true">${d.music}</td><td contenteditable="true">${d.message}</td><td><button onclick="saveRow('${id}')">üíæ</button> <button onclick="del('${id}')">üóë</button></td></tr>`;
}
document.getElementById('sum').innerText=TXT[currentLang].total+" "+total;
drawChart(values);
}

async function saveRow(id){
const row=document.querySelector(`tr[data-id="${id}"]`);
const tds=row.children;
const persons=tds[4].innerText.split(",").map(p=>p.trim());
const data={mainName:tds[0].innerText,phone:tds[1].innerText,time:tds[2].innerText,count:Number(tds[3].innerText),persons:persons,music:tds[5].innerText,message:tds[6].innerText};
await fetch(DB+"/"+id+".json",{method:"PATCH",body:JSON.stringify(data)});
loadAdmin();
}

async function del(id){
if(!confirm(TXT[currentLang].delConfirm))return;
await fetch(DB+"/"+id+".json",{method:"DELETE"});
loadAdmin();
}

function drawChart(values){
const canvas = document.getElementById('chart');
const ctx=canvas.getContext("2d");
ctx.clearRect(0,0,canvas.width,canvas.height);
if(values.length === 0) return;
const max=Math.max(...values,1);
values.forEach((v,i)=>{
const h=(v/max)*250;
ctx.fillStyle="#b06ab3";
ctx.fillRect(i*50+20,280-h,30,h);
});
}
</script>
</body>
</html>
