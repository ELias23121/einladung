<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>90. Geburtstag ‚Äì Maria Ronczka</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{--gold:#c9b26b}
*{box-sizing:border-box;margin:0;padding:0}

/* Verhindert Scrollen */
html, body {
    height: 100%;
    overflow: hidden;
    font-family: 'Playfair Display', serif;
    background: #fff;
    color: #000;
}

/* Hintergrundslideshow mit hellem Overlay f√ºr schwarzen Text */
#bg{position:fixed;inset:0;z-index:-3}
.slide{position:absolute;inset:0;background-size:cover;background-position:center;opacity:0;animation:fade 60s infinite;transform:scale(1)}
.slide:nth-child(1){background-image:url("bilder/bild1.jpg");animation-name:fade}
.slide:nth-child(2){background-image:url("bilder/bild2.jpg");animation-delay:12s}
.slide:nth-child(3){background-image:url("bilder/bild3.jpg");animation-delay:24s}
.slide:nth-child(4){background-image:url("bilder/bild4.jpg");animation-delay:36s}
.slide:nth-child(5){background-image:url("bilder/bild5.jpg");animation-delay:48s}

@keyframes fade{0%{opacity:0}8%{opacity:1}22%{opacity:1}30%{opacity:0}}

/* Heller Overlay damit schwarzer Text immer lesbar ist */
.overlay{position:fixed;inset:0;background:rgba(255,255,255,0.4);z-index:-2}

/* Haupt-Container: Zentriert alles auf einer Seite */
#invite {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    text-align: center;
    padding: 20px;
    z-index: 2;
    position: relative;
}

/* SCHRIFTGR√ñSSEN (angepasst an Viewport Height f√ºr "No-Scroll") */
h1 {
    font-size: 6vh;
    margin-bottom: 2vh;
    font-weight: 700;
}
p {
    font-size: 2.8vh;
    line-height: 1.4;
    max-width: 800px;
    margin-bottom: 3vh;
}

button {
    background: #000;
    color: #fff;
    border: none;
    padding: 1.5vh 4vh;
    font-size: 2.2vh;
    cursor: pointer;
    border-radius: 50px;
    transition: 0.3s;
}
button:hover { background: var(--gold); color: #000; }

/* Formular Modal */
.modal{position:fixed;inset:0;display:none;justify-content:center;align-items:center;background:rgba(0,0,0,.8);z-index:100}
.modal-box{background:#fff; padding:20px; width:90%; max-width:450px; border-radius:10px; color:#000; max-height: 90vh; overflow-y: auto;}
input, textarea, select { width: 100%; padding: 8px; margin: 5px 0 15px; border: 1px solid #ccc; font-family: inherit;}

/* Admin Bereich */
#admin {
    display:none; position:fixed; inset:0; background:#fff; z-index:200; 
    padding:20px; overflow-y:auto; color:#000;
}
table { width:100%; border-collapse:collapse; font-size:12px; }
th, td { border:1px solid #ddd; padding:5px; text-align:left; }

footer {
    position: absolute; bottom: 10px; width: 100%; text-align: center; 
    font-size: 1.5vh; opacity: 0.6;
}
.admin-btn { background:none; border:none; color:#000; font-size:10px; text-decoration:underline; cursor:pointer; padding:0; }

@media (max-width: 480px) {
    h1 { font-size: 5vh; }
    p { font-size: 2.2vh; }
}
</style>
</head>
<body>

<div id="bg">
  <div class="slide"></div><div class="slide"></div><div class="slide"></div><div class="slide"></div><div class="slide"></div>
</div>
<div class="overlay"></div>

<audio id="music" src="0118.mp3" loop muted></audio>

<div id="invite">
    <h1 id="title"></h1>
    <p id="inviteText"></p>
    <button id="btnReply" onclick="openForm()"></button>
    
    <select id="langSelect" onchange="setLang(this.value)" style="width:auto; margin-top:2vh;">
        <option value="de">Deutsch</option>
        <option value="pl">Polski</option>
    </select>

    <footer>
        Erstellt von Elias | <button class="admin-btn" onclick="adminLogin()">Admin</button>
    </footer>
</div>

<div class="modal" id="formModal">
    <div class="modal-box">
        <h2 id="formTitle"></h2>
        <label id="lblName"></label><input id="mainName">
        <label id="lblPhone"></label><input id="phone" type="tel">
        <label id="lblTime"></label><input type="time" id="time" value="13:00">
        <label id="lblCount"></label><input type="number" id="count" min="1" max="10" value="1" onchange="buildPersons()">
        <div id="persons"></div>
        <label id="lblMusic"></label><textarea id="musicWish" rows="2"></textarea>
        <label id="lblMessage"></label><textarea id="message" rows="2"></textarea>
        <button id="btnSend" onclick="sendForm()"></button>
        <button onclick="closeForm()" style="background:#666; margin-left:10px;">X</button>
        <p id="formStatus"></p>
    </div>
</div>

<div id="admin">
    <h2>Admin - G√§steliste</h2>
    <p id="sum"></p><br>
    <button onclick="logout()" style="padding:5px 10px; font-size:12px;">Schlie√üen</button><br><br>
    <table>
        <thead><tr><th>Name</th><th>Anz.</th><th>Personen</th><th>Zeit</th><th>Musik</th><th>Nachricht</th><th>Aktion</th></tr></thead>
        <tbody id="adminList"></tbody>
    </table>
</div>

<script>
const DB="https://geburtstag-bff4c-default-rtdb.europe-west1.firebasedatabase.app/anmeldungen";
let currentLang="de";

const TXT={
de:{title:"Einladung",inviteText:`<b>Maria Ronczka</b> wird 90!<br><br>
Wir laden herzlich ein, diesen besonderen Tag mit uns zu feiern.<br><br>
<b>Wann:</b> 11. April 2026, ab 13:00 Uhr<br>
<b>Wo:</b> Gasthaus Greskamp, Olfen<br><br>
R√ºckmeldung bitte bis Ende Februar.<br>
Wir freuen uns auf Euch!`,
reply:"Ich komme!",formTitle:"Anmeldung",replyBtnSend:"Absenden",person:"Gast",lblName:"Dein Name",lblPhone:"Telefon",lblTime:"Ankunft",lblCount:"Personenzahl",lblMusic:"Musikwunsch",lblMessage:"Nachricht"},
pl:{title:"Zaproszenie",inviteText:`<b>Maria Ronczka</b> ko≈Ñczy 90 lat!<br><br>
Serdecznie zapraszamy do wsp√≥lnego ≈õwiƒôtowania tego dnia.<br><br>
<b>Kiedy:</b> 11 kwietnia 2026, od 13:00<br>
<b>Gdzie:</b> Gasthaus Greskamp, Olfen<br><br>
Prosimy o odpowied≈∫ do ko≈Ñca lutego.<br>
Czekamy na Was!`,
reply:"Bƒôdƒô!",formTitle:"Zapisy",replyBtnSend:"Wy≈õlij",person:"Go≈õƒá",lblName:"Imiƒô",lblPhone:"Telefon",lblTime:"Godzina",lblCount:"Liczba os√≥b",lblMusic:"Muzyka",lblMessage:"Wiadomo≈õƒá"}
};

function setLang(l){
    currentLang=l;
    document.getElementById('title').innerHTML=TXT[l].title;
    document.getElementById('inviteText').innerHTML=TXT[l].inviteText;
    document.getElementById('btnReply').innerText=TXT[l].reply;
    document.getElementById('formTitle').innerText=TXT[l].formTitle;
    document.getElementById('lblName').innerText=TXT[l].lblName;
    document.getElementById('lblPhone').innerText=TXT[l].lblPhone;
    document.getElementById('lblTime').innerText=TXT[l].lblTime;
    document.getElementById('lblCount').innerText=TXT[l].lblCount;
    document.getElementById('lblMusic').innerText=TXT[l].lblMusic;
    document.getElementById('lblMessage').innerText=TXT[l].lblMessage;
    document.getElementById('btnSend').innerText=TXT[l].replyBtnSend;
}
setLang("de");

window.addEventListener('click',()=>{const m=document.getElementById('music');m.muted=false;m.play();},{once:true});

function openForm(){document.getElementById('formModal').style.display="flex"; buildPersons();}
function closeForm(){document.getElementById('formModal').style.display="none";}
function buildPersons(){
    const p=document.getElementById('persons'); p.innerHTML="";
    const n=parseInt(document.getElementById('count').value)||1;
    for(let i=1;i<=n;i++) p.innerHTML+=`<input class="p-in" placeholder="${TXT[currentLang].person} ${i}">`;
}

async function sendForm(){
    const pins=document.querySelectorAll(".p-in");
    const data={
        mainName:document.getElementById('mainName').value,
        phone:document.getElementById('phone').value,
        time:document.getElementById('time').value,
        count:pins.length,
        persons:Array.from(pins).map(i=>i.value),
        music:document.getElementById('musicWish').value,
        message:document.getElementById('message').value
    };
    await fetch(DB+".json",{method:"POST",body:JSON.stringify(data)});
    document.getElementById('formStatus').innerText="Gesendet!";
    setTimeout(closeForm,1500);
}

async function adminLogin(){
    if(prompt("Passwort:")!=="maria90")return;
    document.getElementById('admin').style.display="block";
    const res=await fetch(DB+".json");
    const data=await res.json();
    const list=document.getElementById('adminList');
    list.innerHTML=""; let total=0;
    for(let id in data){
        const d=data[id]; total+=d.count;
        list.innerHTML+=`<tr><td>${d.mainName}</td><td>${d.count}</td><td>${d.persons.join(", ")}</td><td>${d.time}</td><td>${d.music}</td><td>${d.message}</td><td><button onclick="del('${id}')">üóë</button></td></tr>`;
    }
    document.getElementById('sum').innerText="Gesamtg√§ste: "+total;
}
function logout(){document.getElementById('admin').style.display="none";}
async function del(id){ if(confirm("L√∂schen?")){await fetch(`${DB}/${id}.json`,{method:"DELETE"});adminLogin();}}
</script>
</body>
</html>
